	ORG 0000H
	AJMP MAIN
	ORG 000BH
	LJMP INTT0
	ORG 0030H
MAIN:
	SETB EA
	SETB ET0
	SETB TR0
	MOV TMOD,#01H
	MOV TL0,#0AEH
	MOV TH0,#3CH

	
	MOV	60H,#00H
	MOV	61H,#00H
	MOV	62H,#00H
	MOV	63H,#00H
	MOV	64H,#00H
	MOV	65H,#00H
	MOV	66H,#00H
	MOV	67H,#00H
		
	MOV P0,#00H
	MOV P1,#80H ; only Hight bit led light
	MOV R1,#20;  65535-50000=15534(0x3CAE) == 1s	

LOOP:
	ACALL DISPLAY
	SJMP LOOP
	
DISPLAY:
	MOV	R0,#67H
	MOV	DPTR,#TAB	
	MOV	A,@R0	
	MOVC A,@A+DPTR
	MOV	P2,A
	RET
			
INTT0:
	MOV TL0,#0AEH
	MOV TH0,#03CH
	DJNZ R1,EXIT
	ACALL ADDLED ; 调用数码管和Led功能函数
	MOV R1,#20
	MOV A,P0
	CPL A	 
	MOV P0,A
EXIT:	
	RETI
		
ADDLED:
	INC	67H
	MOV	A,67H
						;; P3.7 Control LED
	CJNE A,#3,NECJNE
	SJMP LED0
NECJNE:
	JC LED37
	CLR P3.7
	SJMP LED0
LED37:
	SETB P3.7
LED0:	
						;; P3.7 END
	CJNE A,#10,EXIT
	MOV	67H,#00H
	SETB P3.7	
	RET

TAB:
	DB      0C0H, 0F9H, 0A4H, 0B0H  ;0, 1, 2, 3
	DB       99H,  92H,  82H, 0F8H  ;4, 5, 6, 7
	DB       80H,  90H,  88H,  83H  ;8, 9, A, B
	DB      0C6H, 0A1H,  86H,  8EH  ;C, D, E, F
	END